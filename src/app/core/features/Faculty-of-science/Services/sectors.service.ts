import { Injectable } from '@angular/core';
import { Sector } from '../model/sector.model';

@Injectable({
  providedIn: 'root'
})
export class SectorsService {
  private sectors: Sector[] = [
    {
      id: '1',
      name: 'قطاع الشئون التعليمية والطلاب',
      description: 'إدارة البرامج الأكاديمية والمناهج الدراسية وضمان جودة التعليم',
      icon: 'fas fa-graduation-cap',
      overview: 'يتولى قطاع الشئون التعليمية والطلاب مسؤولية الإشراف على كافة الأنشطة الأكاديمية بالكلية، بما في ذلك تطوير المناهج، وضع المعايير الأكاديمية، تقييم الطلاب، ومتابعة جودة العملية التعليمية.',
      responsibilities: [
        'تطوير ومراجعة المناهج الدراسية',
        'إدارة البرامج الأكاديمية والتخصصات',
        'تقييم أداء الطلاب والامتحانات',
        'برامج تدريب وتطوير أعضاء هيئة التدريس',
        'ضمان جودة التعليم والاعتماد الأكاديمي',
        'متابعة عمليات التقييم والقياس'
      ],
      departments: [
        'قسم الجيولوجيا',
        'قسم الرياضيات',
        'قسم الفيزياء',
        'قسم الكيمياء',
        'قسم النبات والميكروبيولوجي',
        'قسم علم الحيوان'
      ],
      services: [
        'تخطيط البرامج الدراسية',
        'الإرشاد الأكاديمي للطلاب',
        'برامج تدريب أعضاء هيئة التدريس',
        'دعم الطلاب أكاديميًا',
        'تقييم جودة الأداء الأكاديمي'
      ],
      head: 'أ.د/ محمد علام - وكيل الكلية لشئون التعليم والطلاب',
      establishedYear: 2018,
      staffCount: 48,
      budget: 'مليون جنيه مصري',
      achievements: [
        'الحصول على الاعتماد من الهيئة القومية لضمان جودة التعليم (نقابة)',
        'تطبيق نظم تقييم حديثة وإلكترونية',
        'تطوير برامج دراسية مزدوجة ومشتركة',
        'تنظيم دورات تدريبية مكثفة للهيئتين التدريسية والمعاونة'
      ],
      goals: [
        'رفع مستوى التميز الأكاديمي',
        'تحسين مخرجات التعلم للطلاب',
        'تطوير قدرات أعضاء هيئة التدريس',
        'دمج البحث العلمي في العملية التعليمية'
      ]
    },

    {
      id: '2',
      name: 'قطاع الدراسات العليا والبحث العلمي',
      description: 'تعزيز التميز البحثي وتطوير برامج الدراسات العليا',
      icon: 'fas fa-microscope',
      overview: 'يركز قطاع الدراسات العليا والبحث العلمي على دعم البحث العلمي المتميز، تطوير برامج الماجستير والدكتوراه، وتعزيز الابتكار وربط البحث بالصناعة والمجتمع.',
      responsibilities: [
        'وضع استراتيجية البحث العلمي بالكلية',
        'الإشراف على برامج الدراسات العليا',
        'تنسيق التمويل البحثي والمنح',
        'دعم النشر العلمي في المجلات العالمية',
        'تعزيز التعاون البحثي الدولي',
        'نقل التكنولوجيا والملكية الفكرية'
      ],
      departments: [
        'إدارة البحوث العلمية',
        'مكتب الدراسات العليا',
        'وحدة الابتكار ونقل التكنولوجيا',
        'إدارة العلاقات الدولية والبحثية'
      ],
      services: [
        'دعم كتابة المقترحات البحثية',
        'مساعدة في طلبات التمويل البحثي',
        'متابعة رسائل الماجستير والدكتوراه',
        'تسهيل الشراكات البحثية',
        'دعم النشر والمؤتمرات العلمية'
      ],
      head: 'أ.د/ محمد عبدالله عباس - عميد الكلية (مشرف على القطاع)',
      establishedYear: 2018,
      staffCount: 35,
      budget: '3.8 مليون جنيه مصري',
      achievements: [
        'زيادة النشر الدولي بنسبة 50%',
        'الحصول على منح بحثية كبرى من الأكاديمية وSTDF',
        'إبرام اتفاقيات تعاون دولي مع جامعات أوروبية',
        'إطلاق حاضنة ابتكار علمي بالكلية'
      ],
      goals: [
        'مضاعفة الإنتاج العلمي خلال 3 سنوات',
        'تفعيل برامج دراسات عليا جديدة',
        'تعزيز الشراكات الصناعية',
        'ترسيخ ثقافة الابتكار وريادة الأعمال'
      ]
    },

    {
      id: '3',
      name: 'قطاع شئون خدمة المجتمع وتنمية البيئة',
      description: 'ربط الكلية بالمجتمع وتعزيز التنمية المستدامة والوعي البيئي',
      icon: 'fas fa-leaf',
      overview: 'يهدف القطاع إلى تعزيز دور الكلية في خدمة المجتمع المحلي من خلال تنظيم القوافل العلمية، الندوات التثقيفية، المشروعات البيئية، والشراكات مع مؤسسات المجتمع المدني والصناعة.',
      responsibilities: [
        'تنظيم القوافل العلمية والطبية والبيئية',
        'رفع الوعي البيئي والمجتمعي',
        'تنفيذ مشروعات التنمية المستدامة',
        'التعاون مع الجمعيات الأهلية والهيئات الحكومية',
        'تفعيل دور الطلاب في العمل التطوعي',
        'تقديم الاستشارات الفنية للمجتمع'
      ],
      departments: [
        'إدارة خدمة المجتمع',
        'وحدة البرامج البيئية',
        'مركز التوعية العامة',
        'مكتب الشراكات المجتمعية'
      ],
      services: [
        'القوافل التثقيفية والعلمية',
        'الاستشارات البيئية والجيولوجية',
        'برامج محو الأمية والتعليم المجتمعي',
        'تنسيق الأنشطة التطوعية الطلابية',
        'دعم المشروعات الصغيرة والمتوسطة'
      ],
      head: 'أ.م.د/ رقية العماري - وكيل الكلية لشئون خدمة المجتمع وتنمية البيئة',
      establishedYear: 2019,
      staffCount: 26,
      budget: '2.2 مليون جنيه مصري',
      achievements: [
        'تنظيم أكثر من 40 قافلة علمية وبيئية',
        'إطلاق حملات توعية بإعادة التدوير والترشيد',
        'شراكات مع مصانع الأقصر وشركات المياه',
        'تكريم الكلية من محافظة الأقصر على الدور المجتمعي'
      ],
      goals: [
        'توسيع نطاق القوافل لتشمل كل قرى المحافظة',
        'إنشاء مركز استشارات بيئية دائم',
        'رفع وعي 10,000 مواطن سنويًا',
        'تعزيز الشراكة مع القطاع الخاص'
      ]
    },

    {
      id: '4',
      name: 'قطاع الشئون الإدارية والمالية',
      description: 'إدارة الموارد البشرية والمالية والبنية التحتية',
      icon: 'fas fa-building-columns',
      overview: 'يدير القطاع كافة الشئون الإدارية والمالية والبنية التحتية للكلية بكفاءة عالية، لضمان دعم سير العملية التعليمية والبحثية بأفضل صورة ممكنة.',
      responsibilities: [
        'التخطيط المالي والميزانية',
        'إدارة الموارد البشرية',
        'صيانة وتطوير المنشآت',
        'المشتريات والتعاقدات',
        'الدعم الإداري والسكرتارية',
        'متابعة الشئون القانونية'
      ],
      departments: [
        'إدارة الشئون المالية',
        'إدارة الموارد البشرية',
        'إدارة الخدمات والصيانة',
        'إدارة المشتريات والمخازن'
      ],
      services: [
        'إعداد ومتابعة الميزانية',
        'خدمات الموظفين والرواتب',
        'صيانة المعامل والمباني',
        'تنفيذ التعاقدات والمشتريات',
        'الدعم الإداري للأقسام'
      ],
      head: 'الأستاذ/ خالد إبراهيم - أمين الكلية',
      establishedYear: 2018,
      staffCount: 58,
      budget: '5.1 مليون جنيه مصري',
      achievements: [
        'تفعيل النظام الإلكتروني للشئون الإدارية',
        'ترشيد الإنفاق وزيادة الكفاءة المالية',
        'تطوير البنية التحتية للمعامل',
        'تدريب العاملين على النظم الحديثة'
      ],
      goals: [
        'الوصول للتحول الرقمي الكامل بحلول 2026',
        'رفع كفاءة استخدام الموارد',
        'تحسين بيئة العمل',
        'تعزيز الشفافية المالية'
      ]
    },

    {
      id: '5',
      name: 'قطاع شئون الطلاب ورعاية الشباب',
      description: 'دعم الحياة الطلابية والأنشطة الثقافية والرياضية والاجتماعية',
      icon: 'fas fa-users',
      overview: 'يهتم القطاع برعاية الطلاب شاملاً، من خلال تقديم الدعم النفسي والاجتماعي، تنظيم الأنشطة الطلابية، تطوير المهارات القيادية، وتعزيز الانتماء للكلية والجامعة.',
      responsibilities: [
        'رعاية الشباب والأنشطة الطلابية',
        'الإرشاد النفسي والاجتماعي',
        'تنظيم الأنشطة الثقافية والفنية والرياضية',
        'دعم الجمعيات والاتحادات الطلابية',
        'تطوير المهارات القيادية والتطوعية',
        'متابعة شكاوى الطلاب وحلها'
      ],
      departments: [
        'إدارة رعاية الشباب',
        'مركز الإرشاد النفسي',
        'إدارة الأنشطة الطلابية',
        'مكتب دعم الطلاب ذوي الإعاقة'
      ],
      services: [
        'تنظيم الرحلات والمعسكرات',
        'دعم الأسر الطلابية (مثل "طلاب من أجل مصر")',
        'برامج التنمية البشرية والقيادة',
        'المساعدات الاجتماعية والمنح',
        'الإرشاد الأكاديمي والنفسي'
      ],
      head: 'أ.م.د/ نجوى حسين - منسق الأنشطة الطلابية',
      establishedYear: 2018,
      staffCount: 30,
      budget: '1.9 مليون جنيه مصري',
      achievements: [
        'حصول الكلية على المركز الأول جمهوريًا في الأنشطة الطلابية 2024',
        'تنظيم أكثر من 70 نشاطًا طلابيًا سنويًا',
        'تكريم أكثر من 200 طالب متميز',
        'إطلاق برنامج "قادة المستقبل" لتدريب القيادات الطلابية'
      ],
      goals: [
        'رفع نسبة مشاركة الطلاب في الأنشطة إلى 80%',
        'تطوير مركز إرشاد نفسي متكامل',
        'إنشاء نادي رياضي وفني بالكلية',
        'تعزيز ثقافة العمل التطوعي'
      ]
    }
  ];

  getAll(): Sector[] {
    return this.sectors;
  }

  getById(id: string): Sector | undefined {
    return this.sectors.find(s => s.id === id);
  }

  searchSectors(query: string): Sector[] {
    const q = query.toLowerCase();
    return this.sectors.filter(s =>
      s.name.toLowerCase().includes(q) ||
      s.description.toLowerCase().includes(q) ||
      s.responsibilities.some(r => r.toLowerCase().includes(q))
    );
  }

  getTotalStaff(): number {
    return this.sectors.reduce((sum, s) => sum + (s.staffCount || 0), 0);
  }

  getSectorsByStaffCount(): Sector[] {
    return this.sectors.sort((a, b) => (b.staffCount || 0) - (a.staffCount || 0));
  }
}